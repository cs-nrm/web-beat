<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/nrm-web/nrm/lib/notificacion/normalize.css" />
<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/nrm-web/nrm/lib/notificacion/ns-default.css" />
<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/nrm-web/nrm/lib/notificacion/ns-style-attached.css" />
<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/nrm-web/nrm/lib/notificacion/ns-style-other.css" />

<script is:inline>
  const anio = 2025;
  const mes = 9; // Agosto (0=enero, 7=agosto, 8=septiembre, 9=octubre)
  const dia = 22;
  const horaInicio = { h: 19, m: 55 }; // 15:50
  const horaFin = { h: 21, m: 8 };     // 17:00

  function estaEnRango() {
    const ahora = new Date();
    const inicio = new Date(anio, mes, dia, horaInicio.h, horaInicio.m, 0, 0);
    const fin = new Date(anio, mes, dia, horaFin.h, horaFin.m, 0, 0);
    return ahora >= inicio && ahora <= fin;
  }

  function mostrarNotificacion() {
    var notification = new NotificationFx({
      wrapper : document.body, 
      message : '<div class="fondo-live"><a target="_blank" href="/live"><h3>EN VIVO<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hand-click" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#fff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 13v-8.5a1.5 1.5 0 0 1 3 0v7.5" /><path d="M11 11.5v-2a1.5 1.5 0 0 1 3 0v2.5" /><path d="M14 10.5a1.5 1.5 0 0 1 3 0v1.5" /><path d="M17 11.5a1.5 1.5 0 0 1 3 0v4.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7l-.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47" /><path d="M5 3l-1 -1" /><path d="M4 7h-1" /><path d="M14 3l1 -1" />  <path d="M15 6h1" /></svg></h3></a></div>',
      layout : 'attached',
      effect : 'bouncyflip',
      ttl: 90000,
      type : 'notice',
      onClose : function() { return false; },
      onOpen : function() { return false; }
    });
    notification.show();
    // Oculta la notificación si se sale del rango horario
    const ahora = new Date();
    const fin = new Date();
    fin.setHours(horaFin.h, horaFin.m, 0, 0);
    const msRestantes = fin - ahora;
    if (msRestantes > 0) {
      setTimeout(() => notification.dismiss(), msRestantes);
    }
  }

  // Ejecuta al cargar y revisa cada minuto si debe mostrar/ocultar
  function revisarNotificacion() {
    if (estaEnRango()) {
      mostrarNotificacion();
    }
  }
  setTimeout(revisarNotificacion, 100); // Primer intento rápido
  setInterval(revisarNotificacion, 60000); // Revisa cada minuto
</script>

<script is:inline src="https://storage.googleapis.com/nrm-web/nrm/lib/notificacion/classie.js"></script>
<script is:inline src="https://storage.googleapis.com/nrm-web/nrm/lib/notificacion/jquery.countdown.min.js"></script>
<script is:inline src="https://storage.googleapis.com/nrm-web/nrm/lib/notificacion/modernizr.custom.js"></script>
<script is:inline src="https://storage.googleapis.com/nrm-web/nrm/lib/notificacion/notificationFx.js"></script>